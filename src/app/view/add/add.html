<!-- Modal -->
<div id="addDialog" class="modal fade" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <form role="form" [ngFormModel]="group" (ngSubmit)="onSubmit()" novalidate>
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">{{'dialog.addNewRestaurant' | translate}}</h4>
                </div>
                <div class="modal-body">
                    <div class="form-group" [ngClass]="{'has-error': group.find('name').dirty && !group.find('name').valid}">
                        <label for="name">{{'dialog.name' | translate}}</label>
                        <input type="text" class="form-control" id="name" [ngFormControl]="group.find('name')" [(ngModel)]="provider.name" required="true">
                        <span *ngIf="group.find('name').dirty && !group.find('name').valid" class="help-block">{{'message.validation.required' | translate}}</span>
                    </div>
                    <div class="form-group">
                        <label for="homePage">{{'dialog.homePage' | translate}}:</label>
                        <input type="url" class="form-control" id="homePage" [ngFormControl]="group.find('homePage')" [(ngModel)]="provider.homePage">
                    </div>
                    <div class="form-group">
                        <label for="phone">{{'dialog.phone' | translate}}:</label>
                        <input type="tel" class="form-control" id="phone" [ngFormControl]="group.find('phone')" [(ngModel)]="provider.contacts['phone']">
                    </div>
                    <div class="form-group">
                        <label for="address">{{'dialog.address' | translate}}:</label>
                        <input type="text" class="form-control" id="address" [ngFormControl]="group.find('address')" [(ngModel)]="provider.contacts['address']">
                    </div>
                    <div class="form-group" [ngClass]="{'has-error': group.find('dailyMealUrl').dirty && !group.find('dailyMealUrl').valid}">
                        <label for="dailyMealUrl">{{'dialog.dailyMealUrl' | translate}}:</label>
                        <input type="url" class="form-control" id="dailyMealUrl" [ngFormControl]="group.find('dailyMealUrl')" [(ngModel)]="provider.dailyMealUrl" required>
                        <span *ngIf="group.find('dailyMealUrl').dirty && !group.find('dailyMealUrl').valid" class="help-block">{{'message.validation.required' | translate}}</span>
                    </div>
                    <div class="panel panel-success" *ngFor="let mealSet of group.find('mealSets').controls;let mealSetIndex = index">
                      <div class="panel-body bg-success">
                        <div class="form-group">
                            <label attr.for="{{mealSetIndex}}_mealSetXpath">{{'dialog.mealSetXpath' | translate}}:</label>
                            <input type="text" class="form-control" id="{{mealSetIndex}}_mealSetXpath"
                              [ngFormControl]="mealSet.find('mealSetXpath')"
                              [(ngModel)]="provider.mealSetXPaths[mealSetIndex].name">
                        </div>
                        <div class="form-group">
                            <label attr.for="{{mealSetIndex}}_mealSetPriceXpath">{{'dialog.mealSetPriceXpath' | translate}}:</label>
                            <input type="text" class="form-control" id="{{mealSetIndex}}_mealSetPriceXpath"
                              [ngFormControl]="mealSet.find('mealSetPriceXpath')"
                              [(ngModel)]="provider.mealSetXPaths[mealSetIndex].price">
                        </div>
                        <div class="form-group" *ngFor="let meal of mealSet.find('meals').controls; let mealIndex = index">
                          <div class="form-group">
                            <label attr.for="{{mealSetIndex}}_{{mealIndex}}_mealXpath">{{'dialog.mealXpath' | translate}}:</label>
                            <input type="text" class="form-control" id="{{mealSetIndex}}_{{mealIndex}}_mealXpath"
                              [ngFormControl]="meal"
                              [(ngModel)]="provider.mealSetXPaths[mealSetIndex].meals[mealIndex]">
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="form-group" [ngClass]="{'has-error': group.find('color').dirty && !group.find('color').valid}">
                        <label for="backgroundColor">{{'dialog.color' | translate}}:</label>
                        <input type="text" class="form-control" id="color" [ngFormControl]="group.find('color')" [(ngModel)]="provider.color">
                        <span *ngIf="group.find('color').dirty && !group.find('color').valid" class="help-block">{{'message.validation.color' | translate}}</span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" [disabled]="!group.valid" (click)='onSubmit()' data-dismiss="modal" data-target="#addDialog">
                        <i class="fa fa-check" aria-hidden="true"></i>
                        <label>{{'button.submit' | translate}}</label>
                    </button>
                    <button type="button" class="btn btn-default" data-dismiss="modal" data-target="#addDialog">
                        <i class="fa fa-times" aria-hidden="true"></i>
                        <label>{{'button.close' | translate}}</label>
                    </button>
                </div>
            </div>
        </form>

    </div>
</div>
